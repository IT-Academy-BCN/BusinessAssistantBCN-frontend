
<div class="container mb-lg-5 main-container">
  <div class="row d-flex justify-content-center align-items-center wrapp py-4">


    <!-- canvas 1 -->
    <div class="col-12 col-md-6 p-3 mh-600">
      <div class=" shadow">
        <h3 class="ms-2 p-3 fw-bold">
          {{ "common.title.results" | translate }}
        </h3>

        <!-- data -->
        <div class="data p-5" *ngIf="true" id="pdfData">
          <div class="d-flex flex-column mb-4 text-small" *ngFor="let ls of LargeEstablishmentsData" (click)="stablishmentSelected(ls)">
            <h6 class="details text-grey" [class.active] ="stablishmentActive == ls.name"><b>{{ ls.name }}</b></h6>
            <ul class="result-container list-unstyled" *ngFor="let address of ls.addresses">

              <!--*ngFor must be added!-->
              <li *ngIf="address.street_name">
                {{ address.street_name }}, {{ address.number }}
              </li>
              <li *ngIf="address.town">
                {{ address.zip_code }} {{ address.town }}
              </li>
              <li *ngIf="ls.email">Email: {{ ls.email }}</li>
              <li *ngIf="ls.web">Web: {{ ls.web }}</li>
              <li *ngIf="ls.phone">Tel.:{{ ls.phone }}</li>
              <li></li>
            </ul>
          </div>
        </div>



        <div class="ps-3 pe-4 pb-2 pt-4 d-lg-flex">
          <button
            class="btn btn-lg w-100 bg-blue text-white my-1 fw-bolder rounded-0 btn-guardar"
            (click)="open(saveSearch)" type="button">
            {{ "common.button.save-results" | translate }}
          </button>

          <div class="dropdown w-100 my-1 d-flex justify-content-center ms-lg-1 bg-green" >
            <button 
              class="btn btn-lg text-center text-white fw-bolder rounded-0 dropdown-toggle"
              type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
              {{ "common.button.download-results" | translate }}

            </button>
            <ul class="dropdown-menu rounded-0 w-100 mt-1 text-sm bg-gray" aria-labelledby="dropdownMenuButton1">
              <li>
                <a class="dropdown-item"
                  (click)="savePdf()">{{"pages.big-stablish-detail.dropdown.download"|translate}}</a>
              </li>
              <li>
                <a class="dropdown-item" (click)="openPdf()">{{"pages.big-stablish-detail.dropdown.open"|translate}}</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- canvas  2 -->
    <div class="col-12 col-md-6 p-3">
      <div class=" bg-light text-center shadow">
        <!-- ARRAY PROVISIONAL. FILTRAT I ENVIAT -->
        <app-mapbox [filteredResultsToPrintOnMap]="LargeEstablishmentsData"></app-mapbox>
      </div>
    </div>

    

  </div>
</div>



<!-- Save Search Modal -->
<ng-template #saveSearch let-modal>
  <div class="modal-body rounded-0 p-4">
    <h4 class="modal-title fw-bolder">
      {{ "pages.big-stablish-detail.saveSearchModal.title" | translate }}
    </h4>
    <hr class="mx-2" />
    <form [formGroup]="saveSearchForm" (submit)="onSubmit()">
      <div class="mb-4">
        <label for="nombre" class="ps-3 fs-5">{{
          "pages.big-stablish-detail.saveSearchModal.name" | translate
          }}</label>
        <input type="text" name="nombre" formControlName="nombre" [class.is-invalid]="inputInvalid('nombre')"
          class="form-control form-control-lg fw-bold mt-2 rounded-0" />
        <p class="text-danger" *ngIf="inputInvalid('nombre')">
          {{ "pages.big-stablish-detail.saveSearchModal.msgError" | translate }}
        </p>
      </div>
      <div class="mb-4">
        <label for="detalles" class="ps-3 fs-5">{{
          "pages.big-stablish-detail.saveSearchModal.detail" | translate
          }}</label>
        <input type="text" name="detalles" formControlName="detalles" [class.is-invalid]="inputInvalid('detalles')"
          class="form-control form-control-lg fw-bold mt-2 rounded-0" />
        <p class="text-danger" *ngIf="inputInvalid('detalles')">
          {{ "pages.big-stablish-detail.saveSearchModal.msgError" | translate }}
        </p>
      </div>
      <div class="d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-lg justify-content-center text-white fw-bolder rounded-0"
          style="background-color: firebrick" (click)="closeModal()">
          {{
          "pages.big-stablish-detail.saveSearchModal.button.discard"
          | translate
          }}
        </button>
        <button type="submit" class="btn btn-lg text-white fw-bolder rounded-0" style="background-color: #2c5e8f">

          {{
          "pages.big-stablish-detail.saveSearchModal.button.save" | translate
          }}
        </button>
      </div>
    </form>
  </div>
</ng-template>